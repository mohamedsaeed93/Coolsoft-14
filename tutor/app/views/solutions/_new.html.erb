<%= render partial: "solutions/timer" %>
<%= render partial: "solutions/control_bar" %>
<div class="a4">
	<%= render partial: "solutions/editor" %>
	<%= render partial: "solutions/input_box" %>
	<%= render partial: "solutions/console" %>
</div>

<script>
	var editor = ace.edit("editor");
	var edit_session = editor.getSession();
	var hidden_code_field = document.getElementById('solution_code')
	var code_header = "public class CoolSoft {\n";
	var code_footer = "\n}";
	var hidden_field_snippet = document.getElementById('snippet');
	var default_code = document.getElementById('problem_default_code');
	edit_session.setValue(default_code.value);
	editor.setTheme("ace/theme/twilight");
	edit_session.setMode("ace/mode/java");

<!-- Author: Mohamed Fadel -->
	if(hidden_field_snippet.value.length == 0)
	edit_session.setValue(code_header + hidden_code_field.value);
	else
	edit_session.setValue(hidden_field_snippet.value);
<!--end-->

	var code_filter_function = function(event_handler) {
		var unfiltered_code = edit_session.getValue();
		var code_len = unfiltered_code.length;
		var line_count = edit_session.doc.getAllLines().length;
		hidden_code_field.value = unfiltered_code.slice(code_header.length)
	};
	edit_session.on('change', code_filter_function);
	editor.setTheme("ace/theme/twilight");
	edit_session.setMode("ace/mode/java");
</script>
